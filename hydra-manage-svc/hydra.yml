# serve:
#   cookies:
#     same_site_mode: Lax
#   tls:
#     enabled: false
#     cert:
#       path: /etc/ssl/certs/ory-conformity.crt
#     key:
#       path: /etc/ssl/private/ory-conformity.key
# dsn: sqlite://database/db.sqlite?_fk=true
# # log:
# #   level: trace
# #   format: json

# ttl:
#   login_consent_request: 1h
#   access_token: 100h
#   refresh_token: 100h
#   id_token: 100h
#   auth_code: 100h

# urls:
#   self:
#     issuer: http://localhost:4444
#   consent: http://localhost:4455/consent
#   login: http://localhost:4455/login
#   logout: http://localhost:4455/logout
#   identity_provider:
#     url: http://localhost:4434

# secrets:
#   system:
#     - youReallyNeedToChangeThis
# log:
#   leak_sensitive_values: true
#   level: info

# oidc:
#   subject_identifiers:
#     supported_types:
#       - pairwise
#       - public
#     pairwise:
#       salt: youReallyNeedToChangeThis
#   dynamic_client_registration:
#     enabled: true
#     default_scope:
#       - email
#       - offline_access
#       - openid
#       - address
#       - phone
#       - profile

# oauth2:
#   hashers:
#     bcrypt:
#       cost: 4
#   session:
#     encrypt_at_rest: false

# # webfinger.oidc_discovery.client_registration_url

# webfinger:
#   oidc_discovery:
#     supported_claims:
#       - email
#       - email_verified
#       - phone_number
#       - phone_number_verified
#       - name
#       - given_name
#       - family_name
#       - website
#       - zoneinfo
#       - birthdate
#       - gender
#       - profile
#       - preferred_username
#       - middle_name
#       - locale
#       - picture
#       - updated_at
#       - nickname
#       - address
#     supported_scope:
#       - email
#       - offline_access
#       - openid
#       - address
#       - phone
#       - profile
#     userinfo_url: http://hydra:4444/userinfo
#     token_url: http://hydra:4444/oauth2/token
#     jwks_url: http://hydra:4444/.well-known/jwks.json
#     client_registration_url: http://hydra:4445/admin/clients

dsn: sqlite://database/db2.sqlite?_fk=true
serve:
  cookies:
    same_site_mode: Lax
  public:
    cors:
      enabled: true
      allowed_origins:
        - http://127.0.0.1*
        - http://localhost*
      allowed_methods:
        - POST
        - GET
        - PUT
        - PATCH
        - DELETE
      allowed_headers:
        - Authorization
      exposed_headers:
        - Content-Type
  # Enable CORS for the admin endpoint only during local testing
  admin:
    cors:
      enabled: true
      allowed_origins:
        - http://127.0.0.1*
        - http://localhost*
      allowed_methods:
        - GET
        - POST
        - OPTIONS
      allowed_headers:
        - Content-Type
      exposed_headers:
        - Content-Type

# 4444: Hydra public URL
# 4455: Kratos UI: Kratos sign up, sign in, logout
# 4434: Kratos admin URL
urls:
  self:
    issuer: http://localhost:4444
  consent: http://localhost:4455/consent
  login: http://localhost:4455/login
  logout: http://localhost:4455/logout
  identity_provider:
    url: http://localhost:4434

secrets:
  system:
    - 2e89b4f4-38f0-4a7d-b6c5-dc11a2d3c01b6f78181aabb8a3d5e
    # - CHANGE_ME_TO_REAL_SECRET

oidc:
  subject_identifiers:
    supported_types:
      - pairwise
      - public
    pairwise:
      salt: CHANGE_ME_TO_REAL_SECRET

log:
  leak_sensitive_values: true
  level: info

ttl:
  access_token: 8760h # 1 year
  refresh_token: 8760h # 1 year
  id_token: 1h
